<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Itinéraire détaillé avec Go.js</title>
        <script src="release/go.js"></script>
        <style>
            #myDiagramDiv {
                width: 100%;
                height: 500px;
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <div id="myDiagramDiv"></div>

        <script>
            function init() {
                // Initialisation du diagramme Go.js
                var $ = go.GraphObject.make;
                var myDiagram = $(go.Diagram, "myDiagramDiv", {
                    "undoManager.isEnabled": true,
                    layout: $(go.ForceDirectedLayout),
                });

                // Création des nœuds
                myDiagram.nodeTemplate = $(
                    go.Node,
                    "Auto",
                    $(go.Shape, "Circle", {
                        fill: "lightblue",
                        stroke: "black",
                    }),
                    $(
                        go.TextBlock,
                        { margin: 10 },
                        new go.Binding("text", "name")
                    )
                );

                // Création des liaisons
                myDiagram.linkTemplate = $(
                    go.Link,
                    { routing: go.Link.Normal },
                    $(go.Shape, { stroke: "black" }),
                    $(
                        go.TextBlock,
                        { segmentOffset: new go.Point(0, -10) },
                        new go.Binding("text", "distance")
                    )
                );

                // Données de l'itinéraire
                var routeData = [
                    { key: "A", name: "A" },
                    { key: "B", name: "B" },
                    { key: "C", name: "C" },
                    { key: "D", name: "D" },
                ];

                var linkData = [
                    { from: "A", to: "B", distance: "10" },
                    { from: "B", to: "C", distance: "20" },
                    { from: "C", to: "D", distance: "15" },
                    { from: "D", to: "A", distance: "12" },
                ];

                // Chargement des données dans le diagramme
                myDiagram.model = new go.GraphLinksModel(routeData, linkData);
            }

            // Initialisation du diagramme au chargement de la page
            window.onload = function () {
                init();
            };
        </script>
    </body>
</html>
