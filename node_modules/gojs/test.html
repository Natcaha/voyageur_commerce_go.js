<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Problème du Voyageur de Commerce avec GoJS</title>
    <script src="release/go.js"></script>
    <style>
      #myDiagramDiv {
        width: 500px;
        height: 300px;
      }
    </style>
  </head>
  <body>
    <div id="myDiagramDiv"></div>
    <script>
      // Données des villes
      var cities = [
        { key: "A", x: 50, y: 100 },
        { key: "B", x: 150, y: 50 },
        { key: "C", x: 250, y: 150 },
        { key: "D", x: 350, y: 100 },
        { key: "E", x: 450, y: 50 },
      ];

      // Calcul des distances entre les villes
      var distances = {
        A: { B: 10, C: 20, D: 30, E: 40 },
        B: { A: 10, C: 15, D: 25, E: 35 },
        C: { A: 20, B: 15, D: 18, E: 28 },
        D: { A: 30, B: 25, C: 18, E: 12 },
        E: { A: 40, B: 35, C: 28, D: 12 },
      };

      // Initialisation du diagramme
      var $ = go.GraphObject.make;

      var myDiagram = $(go.Diagram, "myDiagramDiv", {
        "undoManager.isEnabled": true,
        layout: $(go.CircularLayout),
      });

      // Ajout des villes
      myDiagram.nodeTemplate = $(
        go.Node,
        "Auto",
        new go.Binding("location", "", function (data) {
          return new go.Point(data.x, data.y);
        }),
        $(go.Shape, "Circle", { fill: "lightblue", stroke: null }),
        $(
          go.TextBlock,
          { margin: 8 },
          new go.Binding("text", "key")
        )
      );

      // Création des villes
      myDiagram.model = new go.GraphLinksModel(cities);

      // Ajout des arcs pour le chemin du voyageur de commerce avec les distances
      for (var i = 0; i < cities.length; i++) {
        var from = cities[i].key;
        var to = cities[(i + 1) % cities.length].key;
        var distance = distances[from][to];
        var label = from + " → " + to + ": " + distance;
        console.log(label);
       myDiagram.linkTemplate = $(
          go.Link,
          $(go.Shape, { stroke: "black" }),
          $(
            go.TextBlock,
            { segmentIndex: -1, margin: new go.Margin(20, 20, 20,20), segmentFraction:0.5, alignment: go.Spot.Top, text: distance, background: "white"},
          )
        );


        myDiagram.model.addLinkData({ from: from, to: to, text: label });
      }
      



    </script>
  </body>
</html>
