<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Problème du Voyageur de Commerce avec D3.js</title>
    <style>
      svg {
        width: 500px;
        height: 300px;
      }
      line {
        stroke: black;
        stroke-width: 1;
      }
      circle {
        fill: lightblue;
        stroke: none;
      }
      text {
        text-anchor: middle;
        alignment-baseline: middle;
        font-family: sans-serif;
        font-size: 10px;
        fill: black;
      }
    </style>
  </head>
  <body>
    <svg id="myDiagram"></svg>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
      // Données des villes
      var cities = [
        { key: "A", x: 50, y: 100 },
        { key: "B", x: 150, y: 50 },
        { key: "C", x: 250, y: 150 },
        { key: "D", x: 350, y: 100 },
        { key: "E", x: 450, y: 50 },
      ];

      // Calcul des distances entre les villes
      var distances = {
        A: { B: 10, C: 20, D: 30, E: 40 },
        B: { A: 10, C: 15, D: 25, E: 35 },
        C: { A: 20, B: 15, D: 18, E: 28 },
        D: { A: 30, B: 25, C: 18, E: 12 },
        E: { A: 40, B: 35, C: 28, D: 12 },
      };

      // Création de l'élément SVG pour le diagramme
      var svg = d3.select("#myDiagram");

      // Ajout des arcs pour le chemin du voyageur de commerce avec les distances
      svg
        .selectAll("line")
        .data(cities)
        .enter()
        .append("line")
        .attr("x1", function (d) {
          return d.x;
        })
        .attr("y1", function (d) {
          return d.y;
        })
        .attr("x2", function (d, i) {
          return cities[(i + 1) % cities.length].x;
        })
        .attr("y2", function (d, i) {
          return cities[(i + 1) % cities.length].y;
        });

      // Ajout des étiquettes de distance sur les liens
      svg
        .selectAll("text")
        .data(cities)
        .enter()
        .append("text")
        .attr("x", function (d, i) {
          return (d.x + cities[(i + 1) % cities.length].x) / 2;
        })
        .attr("y", function (d, i) {
          return (d.y + cities[(i + 1) % cities.length].y) / 2;
        })
        .text(function (d, i) {
          var from = d.key;
          var to = cities[(i + 1) % cities.length].key;
          var distance = distances[from][to];
          return from + " -> " + to + ": " + distance;
        });

      // Ajout des cercles pour représenter les villes
      svg
        .selectAll("circle")
        .data(cities)
        .enter()
        .append("circle")
        .attr("cx", function (d) {
          return d.x;
        })
        .attr("cy", function (d) {
          return d.y;
        })
        .attr("r", 5);
    </script>
  </body>
</html>
